<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>

  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>PiML Toolbox</title>
  

  
  <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  <link rel="stylesheet" href="../../_static/css/vendor/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sg_gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sg_gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sg_gallery-rendered-html.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
<script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/thebelab-helper.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>

</head>

<body class="wy-body-for-nav">

  


<nav id="navbar" class="sk-docs-navbar navbar navbar-expand-md navbar-light bg-light py-0">
  <div class="container-fluid sk-docs-container px-0">
      <a class="navbar-brand py-0" href="../../index.html">
        <img
          class="sk-brand-img"
          src="../../_static/piml-logo.png"
          alt="logo"/>
      </a>
    <button
      id="sk-navbar-toggler"
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="sk-navbar-collapse collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../install.html">Install</a>
        </li>
		<li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../modules/classes.html">API</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../user_guide.html">User Guide</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../auto_examples/index.html">Examples</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../faq.html">FAQ</a>
        </li>      </ul>
      <div id="searchbox" role="search">
          <div class="searchformwrapper">
          <form class="search" action="../../search.html" method="get">
            <input class="sk-search-text-input" type="text" name="q" aria-labelledby="searchlabel" />
            <input class="sk-search-text-btn" type="submit" value="Go" />
          </form>
          </div>
      </div>
    </div>
  </div>
</nav>
  <div class="d-flex" id="sk-doc-wrapper">
      <input type="checkbox" name="sk-toggle-checkbox" id="sk-toggle-checkbox">
      <label id="sk-sidemenu-toggle" class="sk-btn-toggle-toc btn sk-btn-primary" for="sk-toggle-checkbox">Toggle Menu</label>
      <div id="sk-sidebar-wrapper" class="border-right">
        <div class="sk-sidebar-toc-wrapper">
          <div class="sk-sidebar-toc-logo">
            <a href="../../index.html">
              <img
                class="sk-brand-img"
                src="../../_static/piml-logo.png"
                alt="logo"/>
            </a>
          </div>
          <!--div class="btn-group w-100 mb-2" role="group" aria-label="rellinks">
              <a href="accuracy.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="6.1. Accuracy">Prev</a><a href="../testing.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="6. Diagnostic Suite">Up</a>
              <a href="overfit.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="6.3. Overfit">Next</a>
          </div-->
              <div class="sk-sidebar-toc">
              
                <ul>
                
                
                
                
                
                
                <li>
                  <a href="../../user_guide.html" class="sk-toc-active">User Guide</a>
                </li>
                <ul>
                
                  <li>
                    <a href="../introduction.html" class="">1. Introduction</a>
                    
                  </li>
                
                  <li>
                    <a href="../data.html" class="">2. Data Pipeline</a>
                    
                  </li>
                
                  <li>
                    <a href="../extmodels.html" class="">3. Black-box Models</a>
                    
                  </li>
                
                  <li>
                    <a href="../explainability.html" class="">4. Post-hoc Explainability</a>
                    
                  </li>
                
                  <li>
                    <a href="../models.html" class="">5. Interpretable Models</a>
                    
                  </li>
                
                  <li>
                    <a href="../testing.html" class="sk-toc-active">6. Diagnostic Suite</a>
                    
                    <ul>
                      
                        <li class="sk-toctree-l3">
                          <a href="accuracy.html">6.1. Accuracy</a>
                        </li>
                      
                        <li class="sk-toctree-l3">
                          <a href="">6.2. WeakSpot</a>
                        </li>
                      
                        <li class="sk-toctree-l3">
                          <a href="overfit.html">6.3. Overfit</a>
                        </li>
                      
                        <li class="sk-toctree-l3">
                          <a href="reliability.html">6.4. Reliability</a>
                        </li>
                      
                        <li class="sk-toctree-l3">
                          <a href="robustness.html">6.5. Robustness</a>
                        </li>
                      
                        <li class="sk-toctree-l3">
                          <a href="resilience.html">6.6. Resilience</a>
                        </li>
                      
                        <li class="sk-toctree-l3">
                          <a href="fairness.html">6.7. Fairness</a>
                        </li>
                      
                    </ul>
                    
                  </li>
                
                  <li>
                    <a href="../comparison.html" class="">7. Model Comparison</a>
                    
                  </li>
                
                  <li>
                    <a href="../cases.html" class="">8. Case Studies</a>
                    
                  </li>
                
                </ul>
                
                
                
                
                </ul>
              </div>
        </div>
      </div>
      <div id="sk-page-content-wrapper">
        <div class="sk-page-content container-fluid body px-md-3" role="main">
          
  <style type="text/css">
  div.body div.toctree-wrapper ul {
      padding-left: 0;
  }

  div.body li.toctree-l1 {
      padding: 0 0 0.5em 0;
      list-style-type: none;
      font-size: 150%;
      font-weight: bold;
  }

  div.body li.toctree-l2 {
      font-size: 70%;
      list-style-type: square;
      font-weight: normal;
      margin-left: 40px;
  }

  div.body li.toctree-l3 {
      font-size: 85%;
      list-style-type: circle;
      font-weight: normal;
      margin-left: 40px;
  }

  div.body li.toctree-l4 {
      margin-left: 40px;
  }

</style><section id="weakspot">
<h1><span class="section-number">6.2. </span>WeakSpot<a class="headerlink" href="#weakspot" title="Permalink to this heading">¶</a></h1>
<p>Weakness detection refers to the process of identifying regions in which a model is likely to underperform or produce incorrect predictions. These weaknesses can arise due to various reasons such as inadequate or biased data, overfitting, the use of inappropriate algorithms, or insufficient model complexity. Identifying and addressing these weaknesses is crucial to improving the accuracy and reliability of the model. In PiML, weakspot test enables us to identify weak regions of a fitted model, by various slicing techniques, see the details below.</p>
<section id="algorithm-details">
<h2><span class="section-number">6.2.1. </span>Algorithm Details<a class="headerlink" href="#algorithm-details" title="Permalink to this heading">¶</a></h2>
<p>Given a fitted model, we do weakspot test by performing the following steps:</p>
<ul class="simple">
<li><p>Specify 1 or 2 slicing features;</p></li>
<li><p>Segment the data into regions with 1 or 2 slicing features of interest;</p></li>
<li><p>Perform an unsupervised or supervised binning of the chosen slicing features;</p></li>
<li><p>Evaluate the performacne metric of each binning segment;</p></li>
<li><p>Filter out weak regions subject to the performance threshold and minimum sample constraints.</p></li>
</ul>
<p>In weakspot, we have three built-in methods to detect weak regions, i.e., histogram slicing, tree slicing, and ensemble tree slicing.</p>
<p><strong>Histogram Slicing</strong></p>
<p>This is an unsupervised binning method in which we perform equal-space binning on the features of interest. The number of bins is fixed to 10. However as the number of unique values is less than 10, we use the unique values as the split points instead. As two slicing features are specified, we first perform histogram binning on one feature, and then, for each bin, do hisotogram binning on the second feature.</p>
<p>If some connected bins are identified as weak regions, we would merge them into a single bin. The merging process is straightforward for one slicing feature. However, when there are two slicing features, we condition on one dimension and merge the weak regions along the other dimension.</p>
<p><strong>Tree Slicing</strong></p>
<p>This is a supervised binning method. First calculate the metric for each individual sample, for instance, the square error for MSE, absoluate error for MAE, or correct or incorrect status for accuracy score. Then, fit a decision tree model (<code class="docutils literal notranslate"><span class="pre">max_depth=3</span></code> and <code class="docutils literal notranslate"><span class="pre">min_samples_leaf</span></code> as the minimum sample size) using the features of interest as predictors and the individual metrics for each sample as the response. The decision tree is used to generate bins, and the performance of each bin is evaluated.</p>
<p><strong>Ensemble Tree Slicing</strong></p>
<p>This method is similar to that of tree slicing. Given the metrics of individual samples, it uses xgboost (<code class="docutils literal notranslate"><span class="pre">max_depth=2</span></code>, <code class="docutils literal notranslate"><span class="pre">n_estimaors=100</span></code>, <code class="docutils literal notranslate"><span class="pre">tree_method=&quot;hist&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">max_bin=20</span></code>) to generate bins rather than trees. The binning results of xgboost is usually more granular.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The supervised binning methods, i.e., tree slicing and ensemble tree slicing, can only be used as the metric is additive. That is, the metric of whole sample can be calculated by summing up the metric of individual samples. For example, the “MSE”, “MAE, “ACC” (accuracy score) metrics are additive, but “R2”, “AUC”, and “F1” metrics are not. The default metric is “MSE” for regression tasks and ACC for classification tasks. The available metrics are “MSE”, “MAE”, “R2”, “ACC”, “AUC”, and “F1”.</p>
</div>
</section>
<section id="usage">
<h2><span class="section-number">6.2.2. </span>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p>For demonstration purpose, we consider a XGB2 model on the TaiwanCredit data. Weakspot assessment can be done using <code class="docutils literal notranslate"><span class="pre">model_diagnose</span></code>. To evaluate weak regions, set <code class="docutils literal notranslate"><span class="pre">show</span></code> to “weakspot”. In addition, the following parameters provide more flexibility.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">slice_method</span></code>: This option is used to chose which slcing method to use, avaible options includes “histogram”, “tree”, and “xgb”, which corresponds the three previously mentioned slicing methods. The default is “histogram”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice_features</span></code>: This is the argument for specifying the list of slicing features. To use weakspot, 1 or 2 slicing features should be specified, otherwise, a warning message would show up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bins</span></code>: This is the number of bins for histogram slicing. By default, it is set to 10.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metric</span></code>: The performance metrics, including “MSE”, “MAE”, and “R2” for regression; “ACC”, “AUC”, and “F1” for classification. The default metric is “MSE” for regression tasks and “ACC” for classification tasks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threshold</span></code>: This is the performance metric threshold ratio to distinguish weak and good regions. By default, it is set to 1.1, which is equivalent to 10% performance drop compared to the average. For instance, if the AUC of the whole sample (the train or test set) is 0.8, then the threshold is 0.8 / 1.1 = 0.723. Regions with AUC less than 0.723 will be treated as weak regions. For metrics like MSE for regression, the threshold is instead 0.8 * 1.1 = 0.88 (where 0.8 is the average metric of the whole sample), as the MSE metric is the smaller the better. Regions with MSE greater than 0.88 will be treated as weak regions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min_samples</span></code>: The minimum sample size for a weak region, and the default value is 20. Regions with sample size less than 20 will be ignored.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_test</span></code>: This boolean argument is used to switch between train and test sets. By default, it is set to False (training data). To use the testing data, set <code class="docutils literal notranslate"><span class="pre">use_test</span></code> to True.</p></li>
</ul>
<section id="one-way-weakspot-plot">
<h3><span class="section-number">6.2.2.1. </span>One-way WeakSpot Plot<a class="headerlink" href="#one-way-weakspot-plot" title="Permalink to this heading">¶</a></h3>
<p>In the following demo, we identify weak regions of the testing data (<code class="docutils literal notranslate"><span class="pre">use_test=True</span></code>). We set the slice method to be “histogram”, threshold ratio to be 1.1, minimum sample size as 100, and focus on a single slicing feature <code class="docutils literal notranslate"><span class="pre">PAY_1</span></code>.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">model_diagnose</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;XGB2&quot;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="s2">&quot;weakspot&quot;</span><span class="p">,</span> <span class="n">slice_method</span><span class="o">=</span><span class="s2">&quot;histogram&quot;</span><span class="p">,</span>
                        <span class="n">slice_features</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;PAY_1&quot;</span><span class="p">],</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">min_samples</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;ACC&quot;</span><span class="p">,</span>
                        <span class="n">use_test</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">return_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">original_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<figure class="align-left">
<a class="reference external image-reference" href="../../auto_examples/testing/plot_1_weakspot_cls.html"><img alt="../../_images/sphx_glr_plot_1_weakspot_cls_001.png" src="../../_images/sphx_glr_plot_1_weakspot_cls_001.png" /></a>
</figure>
<p>The plot above shows that one weak region is detected, for <code class="docutils literal notranslate"><span class="pre">PAY_1</span></code> between 0.2 and 0.4. The red dotted line represents the performance threshold (around 0.75) of weak regions, determined by the average metric (around 0.82) divided by the user-specified argument <code class="docutils literal notranslate"><span class="pre">threshold</span></code> (1.1). The weak region is annotated with its weak region number. On the x-axis, we have our variable of interest, and on the y-axis, the density and the accuracy score of each segment. In the density plot, the “Above threshold” and “Below threshold” denotes the population with prediction error greater or less than the threshold. Note that as we use metrics that are not additive, e.g., “AUC”, “F1” for classification, or “R2” for regression, the density plot does not show the “Above threshold” and “Below threshold” labels.</p>
<p>The detailed information of weak regions can be found in the returned weakspot table, as we set <code class="docutils literal notranslate"><span class="pre">return_data</span></code> to True.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
        align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
        align: left;
    }

    .dataframe thead th {
        text-align: right;
        align: left;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>[PAY_1</th>
      <th>PAY_1)</th>
      <th>#Test</th>
      <th>#Train</th>
      <th>test_ACC</th>
      <th>train_ACC</th>
      <th>Gap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.2</td>
      <td>0.4</td>
      <td>1265</td>
      <td>5090</td>
      <td>0.695652</td>
      <td>0.689587</td>
      <td>0.006065</td>
    </tr>
  </tbody>
</table>
</div>
</div><p>The table above shows the weak regions of the testing data. It contains the following columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[feature_name</span></code>: The lower bound of the slicing feature;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature_name)</span></code>: The upper bound of the slicing feature;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#Test</span></code>: The number of samples in the testing set;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#Train</span></code>: The number of samples in the training set;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_metric</span></code>: The performance metric of the weak region on testing set;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">train_metric</span></code>: The performance metric of the weak region on training set;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Gap</span></code>: The difference between the testing and the training performance metric.</p></li>
</ul>
</div></blockquote>
<p>Note that if no weak region is detected, then a message saying “No weak regions detected.” will be displayed, and the <code class="docutils literal notranslate"><span class="pre">results</span></code> object will become <code class="docutils literal notranslate"><span class="pre">None</span></code>. Note that as there exist multiple weak regions, the order of weak regions is determined by the gap between the testing and the training performance metrics.</p>
</section>
<section id="two-way-weakspot-plot">
<h3><span class="section-number">6.2.2.2. </span>Two-way WeakSpot Plot<a class="headerlink" href="#two-way-weakspot-plot" title="Permalink to this heading">¶</a></h3>
<p>In the following demo, we identify weak regions of the testing data (<code class="docutils literal notranslate"><span class="pre">use_test=True</span></code>) using two slicing features, i.e., <code class="docutils literal notranslate"><span class="pre">PAY_1</span></code> and <code class="docutils literal notranslate"><span class="pre">PAY_2</span></code>. We set the minimum sample size as 100 and still uses the histogram slicing.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">model_diagnose</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;XGB2&quot;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="s2">&quot;weakspot&quot;</span><span class="p">,</span> <span class="n">slice_method</span><span class="o">=</span><span class="s2">&quot;histogram&quot;</span><span class="p">,</span>
                       <span class="n">slice_features</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;PAY_1&quot;</span><span class="p">,</span> <span class="s2">&quot;PAY_2&quot;</span><span class="p">],</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">min_samples</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;ACC&quot;</span><span class="p">,</span>
                       <span class="n">use_test</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">return_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">original_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<figure class="align-left">
<a class="reference external image-reference" href="../../auto_examples/testing/plot_1_weakspot_cls.html"><img alt="../../_images/sphx_glr_plot_1_weakspot_cls_002.png" src="../../_images/sphx_glr_plot_1_weakspot_cls_002.png" /></a>
</figure>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>[PAY_1</th>
      <th>PAY_1)</th>
      <th>[PAY_2</th>
      <th>PAY_2)</th>
      <th>#Test</th>
      <th>#Train</th>
      <th>test_ACC</th>
      <th>train_ACC</th>
      <th>Gap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.3</td>
      <td>0.4</td>
      <td>0.000000</td>
      <td>0.250000</td>
      <td>191</td>
      <td>800</td>
      <td>0.691099</td>
      <td>0.678750</td>
      <td>0.012349</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.2</td>
      <td>0.3</td>
      <td>0.111111</td>
      <td>0.222222</td>
      <td>268</td>
      <td>956</td>
      <td>0.727612</td>
      <td>0.717573</td>
      <td>0.010039</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.3</td>
      <td>0.4</td>
      <td>0.375000</td>
      <td>0.625000</td>
      <td>322</td>
      <td>1354</td>
      <td>0.720497</td>
      <td>0.717134</td>
      <td>0.003362</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.2</td>
      <td>0.3</td>
      <td>0.333333</td>
      <td>0.555556</td>
      <td>351</td>
      <td>1430</td>
      <td>0.612536</td>
      <td>0.614685</td>
      <td>-0.002150</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.0</td>
      <td>0.1</td>
      <td>0.375000</td>
      <td>0.750000</td>
      <td>82</td>
      <td>360</td>
      <td>0.621951</td>
      <td>0.625000</td>
      <td>-0.003049</td>
    </tr>
  </tbody>
</table>
</div>
</div><p>This demo considers two variables. Under this setting, the plot and the summary table indicate 5 weak regions. For instance, region 0 recorded 191 testing and 800 training samples with <code class="docutils literal notranslate"><span class="pre">PAY_1</span></code> in [0.3, 1.4) and <code class="docutils literal notranslate"><span class="pre">PAY_AMT2</span></code> in [0.00, 0.25). In addition, the table contains information such as the testing and the training accuracy score of the samples in each region and the gap between the testing and the training ACC score.</p>
</section>
</section>
<section id="examples">
<h2><span class="section-number">6.2.3. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<aside class="topic">
<p class="topic-title">Example 1: BikeSharing</p>
<blockquote>
<div><p>The first example below demonstrates how to use PiML with its high-code APIs for developing machine learning models for the BikeSharing data from the UCI repository, which consists of 17,389 samples of hourly counts of rental bikes in Capital bikeshare system; see details. The response <code class="docutils literal notranslate"><span class="pre">cnt</span></code> (hourly bike rental counts) is continuous and it is a regression problem.</p>
</div></blockquote>
<ul class="simple">
<li><p><a class="reference internal" href="../../auto_examples/testing/plot_1_weakspot_reg.html#sphx-glr-auto-examples-testing-plot-1-weakspot-reg-py"><span class="std std-ref">WeakSpot: Regression</span></a></p></li>
</ul>
</aside>
<aside class="topic">
<p class="topic-title">Examples 2: Taiwan Credit</p>
<blockquote>
<div><p>The second example below demonstrates how to use PiML’s high-code APIs for the TaiwanCredit dataset from the UCI repository. This dataset comprises the credit card details of 30,000 clients in Taiwan from April 2005 to September 2005, and more information can be found on the TaiwanCreditData website. The data can be loaded directly into PiML, although it requires some preprocessing. The FlagDefault variable serves as the response for this classification problem.</p>
</div></blockquote>
<ul class="simple">
<li><p><a class="reference internal" href="../../auto_examples/testing/plot_1_weakspot_cls.html#sphx-glr-auto-examples-testing-plot-1-weakspot-cls-py"><span class="std std-ref">WeakSpot: Classification</span></a></p></li>
</ul>
</aside>
</section>
</section>


        </div>
      <div class="container">
        <footer class="sk-content-footer">
              &copy; Copyright 2022-, PiML-Toolbox authors.
            <a href="../../_sources/guides/testing/weakspot.rst.txt" rel="nofollow">Show this page source</a>
        </footer>
      </div>
    </div>
  </div>


  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
      
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
  </script>

<script>
$(document).ready(function() {
    /* Add a [>>>] button on the top-right corner of code samples to hide
     * the >>> and ... prompts and the output and thus make the code
     * copyable. */
    var div = $('.highlight-python .highlight,' +
                '.highlight-python3 .highlight,' +
                '.highlight-pycon .highlight,' +
		'.highlight-default .highlight')
    var pre = div.find('pre');

    // get the styles from the current theme
    pre.parent().parent().css('position', 'relative');
    var hide_text = 'Hide prompts and outputs';
    var show_text = 'Show prompts and outputs';

    // create and add the button to all the code blocks that contain >>>
    div.each(function(index) {
        var jthis = $(this);
        if (jthis.find('.gp').length > 0) {
            var button = $('<span class="copybutton">&gt;&gt;&gt;</span>');
            button.attr('title', hide_text);
            button.data('hidden', 'false');
            jthis.prepend(button);
        }
        // tracebacks (.gt) contain bare text elements that need to be
        // wrapped in a span to work with .nextUntil() (see later)
        jthis.find('pre:has(.gt)').contents().filter(function() {
            return ((this.nodeType == 3) && (this.data.trim().length > 0));
        }).wrap('<span>');
    });

    // define the behavior of the button when it's clicked
    $('.copybutton').click(function(e){
        e.preventDefault();
        var button = $(this);
        if (button.data('hidden') === 'false') {
            // hide the code output
            button.parent().find('.go, .gp, .gt').hide();
            button.next('pre').find('.gt').nextUntil('.gp, .go').css('visibility', 'hidden');
            button.css('text-decoration', 'line-through');
            button.attr('title', show_text);
            button.data('hidden', 'true');
        } else {
            // show the code output
            button.parent().find('.go, .gp, .gt').show();
            button.next('pre').find('.gt').nextUntil('.gp, .go').css('visibility', 'visible');
            button.css('text-decoration', 'none');
            button.attr('title', hide_text);
            button.data('hidden', 'false');
        }
    });

	/*** Add permalink buttons next to glossary terms ***/
	$('dl.glossary > dt[id]').append(function() {
		return ('<a class="headerlink" href="#' +
			    this.getAttribute('id') +
			    '" title="Permalink to this term">¶</a>');
	});
  /*** Hide navbar when scrolling down ***/
  // Returns true when headerlink target matches hash in url
  (function() {
    hashTargetOnTop = function() {
        var hash = window.location.hash;
        if ( hash.length < 2 ) { return false; }

        var target = document.getElementById( hash.slice(1) );
        if ( target === null ) { return false; }

        var top = target.getBoundingClientRect().top;
        return (top < 2) && (top > -2);
    };

    // Hide navbar on load if hash target is on top
    var navBar = document.getElementById("navbar");
    var navBarToggler = document.getElementById("sk-navbar-toggler");
    var navBarHeightHidden = "-" + navBar.getBoundingClientRect().height + "px";
    var $window = $(window);

    hideNavBar = function() {
        navBar.style.top = navBarHeightHidden;
    };

    showNavBar = function() {
        navBar.style.top = "0";
    }

    if (hashTargetOnTop()) {
        hideNavBar()
    }

    var prevScrollpos = window.pageYOffset;
    hideOnScroll = function(lastScrollTop) {
        if (($window.width() < 768) && (navBarToggler.getAttribute("aria-expanded") === 'true')) {
            return;
        }
        if (lastScrollTop > 2 && (prevScrollpos <= lastScrollTop) || hashTargetOnTop()){
            hideNavBar()
        } else {
            showNavBar()
        }
        prevScrollpos = lastScrollTop;
    };

    /*** high performance scroll event listener***/
    var raf = window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        window.oRequestAnimationFrame;
    var lastScrollTop = $window.scrollTop();

    if (raf) {
        loop();
    }

    function loop() {
        var scrollTop = $window.scrollTop();
        if (lastScrollTop === scrollTop) {
            raf(loop);
            return;
        } else {
            lastScrollTop = scrollTop;
            hideOnScroll(lastScrollTop);
            raf(loop);
        }
    }
  })();
});

</script>
    

<script src="_static/js/vendor/bootstrap.min.js"></script>

</body>
</html>